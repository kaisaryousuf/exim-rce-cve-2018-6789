#!/usr/bin/env bash
set -e

# disable ASLR
echo "kernel.randomize_va_space = 0" > /etc/sysctl.d/01-disable-aslr.conf
echo 0 > /proc/sys/kernel/randomize_va_space

# install Docker
dnf -y install dnf-plugins-core
dnf config-manager --add-repo https://download.docker.com/linux/fedora/docker-ce.repo
yes | dnf install -y docker-ce docker-ce-cli containerd.io

# (auto) start docker
systemctl enable docker
systemctl start docker

# install misc tools
dnf -y install python3 python3-devel python3-pip redhat-rpm-config nmap-ncat vim git
dnf -y group install "C Development Tools and Libraries"

# install python packages
python3 -m pip install pwntools

echo "export TERM=xterm-256color" >> /home/vagrant/.bashrc

exit 0
